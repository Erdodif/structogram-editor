@import "../variables";
@import "../mixins";

@mixin if_indicator_false($content: " ") {
    @include render_pseudo($content);
    @include icon_background(calc(100% - $border_width * 3 + .075em));
    background-image: $icon_diagonal_line;
    top: math.div(-$border_width, 2);
    margin-block-start: -.025em;
    padding-block-start: 0.925em;
    padding-inline-end: 0.5ch;
    display: block;
    width:3.5ch;
    text-align: right;
    right: 0%;
    left: unset;
}

@mixin if_indicator_true($content: " ") {
    @include if_indicator_false($content);
    transform: scaleX(-1);
    left: 0%;
    right: unset;
}

@mixin statement_if{
    position: relative;
    display: grid;
    > .main {
        border-block-end: $border;
        border-inline-end: $border;
        padding-inline: 3.2ch;
        position: relative;
        &::before {
            @include if_indicator_true("I");
        }
        &::after {
            @include if_indicator_false("H");
        }
    }
    > .content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: repeat(2,minmax(1.750em, auto));
        grid-template-areas:      
            'true      false' 
            'otherwise otherwise';
        > :first-child{
            grid-area: true;
        }
        > :nth-child(2){
            grid-area: false;
        }
        > :last-child{
            grid-area: otherwise;
        }
    }
}

@mixin statement_switch{
    &> .main{
        display: none;
    }
    &> .content{
        display: grid;
        grid-template-rows: 1fr 1fr;
        grid-template-columns: 1fr;
        grid-auto-columns: 1fr;
        grid-auto-flow:column;
        //TODO place every element in the first row in order, except the last child, which will be actually the statement after it(and also below it)
        &> {
            &> .switch-if >.main::before{
                @include if_indicator_true;
            }
            &> .switch-else >.main::before{
                @include if_indicator_true;
            }
            grid-row-start: 1;
            grid-row-end: 1;
        }
        > :last-child{
            grid-row: 2;
            grid-column-start: 1;
            grid-column-end: -1;
        }
    }
}
